# 局域网聊天系统

一个简单易用的局域网聊天系统，支持多客户端连接，具有良好的用户体验和稳定性。

## 功能特点

### 客户端
- ✅ 支持连接到指定IP地址和端口
- ✅ 友好的GUI界面
- ✅ 实时聊天功能
- ✅ 支持发送和接收消息
- ✅ 显示自己发送的消息
- ✅ 支持回车键发送消息
- ✅ 自动滚动聊天记录
- ✅ 连接状态提示
- ✅ 错误处理和提示

### 服务端
- ✅ 运行在7891端口
- ✅ 支持多客户端连接
- ✅ 消息广播功能
- ✅ 新用户加入通知
- ✅ 用户离开通知
- ✅ 详细的日志记录
- ✅ 线程安全设计
- ✅ 完善的错误处理
- ✅ 自动处理客户端断开连接

## 系统要求

- Python 3.6+
- tkinter（Python标准库，通常已安装）

## 使用方法

### 1. 启动服务端

在命令行中运行：

```bash
python server.py
```

服务端将启动并监听7891端口，输出类似以下信息：

```
[2023-10-01 12:00:00] 聊天服务器已启动，正在监听端口 7891...
[2023-10-01 12:00:00] 服务器IP地址: 192.168.1.100
```

### 2. 启动客户端

在命令行中运行：

```bash
python client.py
```

或者直接双击client.py文件运行。

### 3. 连接到服务器

1. 在客户端界面中，输入服务器的IP地址（默认为127.0.0.1）
2. 输入服务器端口（默认为7891）
3. 点击"连接服务器"按钮
4. 连接成功后，输入您的昵称
5. 点击"确定"按钮进入聊天界面

### 4. 开始聊天

- 在输入框中输入消息，点击"发送"按钮或按回车键发送
- 聊天记录会显示在上方的文本区域
- 您发送的消息会显示为"我: 消息内容"
- 其他用户发送的消息会显示为"用户名: 消息内容"
- 系统消息会显示系统通知，如用户加入或离开

## 代码结构

### client.py

- `start_client()`: 主函数，创建GUI界面
- `create_connection_frame()`: 创建连接界面
- `create_nickname_frame()`: 创建昵称输入界面
- `setup_chat_interface()`: 创建聊天界面
- `send_message()`: 发送消息函数
- `receive_messages()`: 接收消息函数

### server.py

- `ChatServer`类: 聊天服务器主类
  - `__init__()`: 初始化服务器
  - `handle_client()`: 处理单个客户端连接
  - `broadcast_message()`: 广播消息给所有客户端
  - `start()`: 启动服务器
  - `stop()`: 停止服务器

- `start_server()`: 启动服务器的便捷函数

## 技术细节

- **网络通信**: 使用TCP套接字
- **并发处理**: 多线程技术，每个客户端一个线程
- **GUI框架**: tkinter
- **线程安全**: 使用锁机制保护共享资源
- **错误处理**: 完善的异常捕获和处理

## 优化建议

1. 添加消息历史记录功能
2. 支持发送文件
3. 支持私聊功能
4. 添加表情符号支持
5. 实现消息加密
6. 添加用户在线状态显示
7. 支持服务器配置文件

## 故障排除

### 客户端无法连接到服务器
- 检查服务器是否已启动
- 检查服务器IP地址和端口是否正确
- 检查防火墙设置，确保7891端口已开放
- 确保客户端和服务器在同一局域网内

### 消息发送失败
- 检查网络连接是否正常
- 检查服务器是否仍在运行
- 检查客户端是否已断开连接

## 许可证

MIT License

## 更新日志

### v1.0.0
- 初始版本
- 支持基本的聊天功能
- 支持多客户端连接
- 友好的GUI界面
- 完善的错误处理
